{% extends 'base.html' %}
{% load static %}
{% block content %}
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
    <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
  </svg>

        <!-- ============================================================== -->
        <!-- Start right Content here -->
        <!-- ============================================================== -->
        <div class="main-content">

            <div class="page-content">
                <div class="container-fluid">

                    <!-- start page title -->
                    <div class="row">
                        <div class="col-12">
                            <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                                <h4 class="mb-sm-0">Warehouse Master</h4>

                                <div class="page-title-right">
                                    <ol class="breadcrumb m-0">
                                        <li class="breadcrumb-item"><a href="javascript: void(0);">Dashboard </a>
                                        </li>
                                        <li class="breadcrumb-item active">Warehouse Master </li>
                                    </ol>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- end page title -->

                    <div class="row">
                        <div class="col">

                            <div class="h-100">
                                <div class="row mb-3 pb-1">
                                    <div class="col-12">
                                        <div class="d-flex align-items-lg-center flex-lg-row flex-column">


                                        </div><!-- end card header -->
                                    </div>
                                    <!--end col-->
                                </div>
                                <!--end row-->

                                <div class="row">
                                    <div class="col-lg-12  ">
                                        <div class="card" style="padding:25px;">
                                            <div class="card-header align-items-center d-flex">
                                                <h1 class="card-title mb-0 flex-grow-1"> Add New Warehouse </h1>
                                                <p><span  class="required"></span> field are required</p>

                                            </div><!-- end card header -->
                                        <form  name="warehoseForm" method="POST" onsubmit="return validateForm()" action="{% url 'ItemMaster:addwarehouse' %}">
                                                {% csrf_token %}
                                    
                                            <div class="card-body">
                                                <div class="live-preview">
                                                    <div class="row gy-4">

                                                        <div class="col-xxl-5 col-md-6"  >
                                                            <div id="wname">
                                                                 <label for="exampleInputrounded"  class="required">
                                                                    Warehouse Name: </label> 
                                                                   
                                                                <input type="text" class="form-control rounded-pill"
                                                                     onfocusout="ValidateName()" onkeyup="ValidateName()" name="warehousename"
                                                                    placeholder="Enter your Warehousename" >
                                                                <span id="wname1" class="formerror"></span>
                                                            </div>
                                                       

                                                        </div>

                                                        <div class="col-xxl-5 col-md-6" >
                                                            <div id="WAdd">
                                                                <label for="exampleInputrounded"  class="required">
                                                                    Warehouse Address : </label> 
                                                                   
                                                                <input type="text" class="form-control rounded-pill"
                                                                    onfocusout="Validateitmdes()" onkeyup="Validateitmdes()" name="Warehouse_Add"
                                                                    placeholder="Enter your Warehouse Address" >
                                                                <span id="wadd1" class="formerror"></span>

                                                            </div>
                                                        </div>

                                                        
                                                        <div class="col-xxl-3 col-md-6">
                                                            <div>
                                                                
                                                                <div class="flex-shrink-0">
                                                                <button class="btn btn-primary add-btn"  onclick="mySucess()" data-bs-toggle="modal"
                                                                data-bs-target="#showModal"><i
                                                                class="ri-add-line align-bottom me-1"></i> Add Warehouse
                                                                </button>

                                                                </div>
                                                            </div>
                                                        </div>   

                                                    </div> 
                                                </div> 
                                            </div> 
                                        </form>
                                                            
                                                        
                                                    <!--end row-->
                                                    <div class="row">
                                                        <div class="col-lg-12  ">
                                                            <div class="card" style="padding:25px;">
                                                                <div class="card-header align-items-center d-flex">
                                                                    <h1 class="card-title mb-0 flex-grow-1"> </h1>
                    
                                                                </div><!-- end card header -->
                                                </div>

                                            </div>
                                        
                                        </div>
                                    
                                    </div>

                                    <div class="col-lg-12">
                                        <div class="card" id="tasksList">
                                            <div class="card-header border-0">
                                                <div class="d-flex align-items-center">
                                                    <h5 class="card-title mb-0 flex-grow-1">Warehouse List </h5>
                                              
                                                </div>
                                            </div>
                                           
                                            <!--end card-body-->
                                            <div class="card-body" style="padding:25px;" >
                                                <div class="table-responsive table-card mb-4">
                                                {% for message in messages %}
                                                {%if "AddItem" in message.tags %}
                                                    <div class="message">
                                                        <center><h4><p style = "color:green"> {{message}} </p> </h4></center>
                                                        <a href="#" class="del-msg">&times;</a>
                                                    </div>
                                                {%endif%}
                                                {% endfor %}
                                                {% for message in messages %}
                                                {%if "deleteItem" in message.tags %}
                                                    <div class="message">
                                                        <center><h4><p style = "color:red"> {{message}} </p> </h4></center>
                                                        <a href="#" class="del-msg">&times;</a>
                                                    </div>
                                                {%endif%}
                                                {% endfor %}
                                                   
                                                        <table  class="table table-striped table-bordered table-sm" cellspacing="0" width="100%" id="myTable">  
                                                            <thead class="black white-text">  
                                                              <tr align="center">  
                                                                <th>Warehouse Name</th>
                                                                <th>Warehouse Address</th>
                                                                <th>Edit</th>
                                                                <th>Delete</th> 
                                                              </tr>  
                                                            </thead>  
                                                            <tbody>
                                                                {% for i in wid %}
                                                                <tr>
                                                                    <td align="center">{{i.warehouse_name}}</td>
                                                                    <td align="center">{{i.warehouse_address}}</td>
                                                                    <td align="center"><a href="{% url 'ItemMaster:warehouse_edit' pk=i.id  %} "><i class="fa fa-pencil-square-o" aria-hidden="true"  style="font-size:24px;"></i></a> </td>
                                                                    <td align="center"><a  href="{% url 'ItemMaster:delete_warehouse' i.id %}"><i class="fa fa-trash-o" data-sid={{i.id}} aria-hidden="true" style="font-size:24px;color:red"></i></a></td>
                                                                    
                                                                </tr>
                                                                {% endfor%}
                                                            </tbody>
                                                          </table>
                                                  
                                                    
                                                    <!--end table-->
                                                    <div class="noresult" style="display: none;">
                                                        <div class="text-center">
                                                            <lord-icon src=""
                                                                trigger="loop"
                                                                colors="primary:#121331,secondary:#08a88a"
                                                                style="width:75px;height:75px"></lord-icon>
                                                            <h5 class="mt-2">Sorry! No Result Found</h5>
                                                            <p class="text-muted mb-0">We've searched more than 200k+
                                                                tasks We did not find any tasks for you search.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="d-flex justify-content-end mt-2">
                                                    <div class="pagination-wrap hstack gap-2" style="display: none;">
                                                        <a class="page-item pagination-prev disabled" href="#">
                                                            Previous
                                                        </a>
                                                        <ul class="pagination listjs-pagination mb-0">
                                                            <li class="active"><a class="page" href="#" data-i="1"
                                                                    data-page="8">1</a></li>
                                                        </ul>
                                                        <a class="page-item pagination-next disabled" href="#">
                                                            Next
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--end card-body-->
                                        </div>
                                        <!--end card-->
                                    </div>


                                </div>
                                <!--end col-->
                            </div>


                        </div> <!-- end .h-100-->

                    </div> <!-- end col -->

                    <!-- end col -->
                </div>

            </div>
            <!-- container-fluid -->
        </div>
        <!-- End Page-content -->

      
    <script>
        function clearErrors() {

            errors = document.getElementsByClassName('formerror');
            for (let item of errors) {
                item.innerHTML = "";
            }
    
    
        }
        function seterror(id, error) {
            //sets error inside tag of id 
            element = document.getElementById(id);
            element.getElementsByClassName('formerror')[0].innerHTML = error;
    
        }
        function validateForm() {
            var returnval = true;
            clearErrors();
            var numRegex = /[!@#$%^&*+\-=\[\]{};':"\\|<>\/?]+/;
            var numberRegex = new RegExp("[0-9]");
    
                var iname = document.forms['warehoseForm']["warehousename"].value;
                if (iname.match(numRegex)) {
                    seterror("wname", "Special Characters are not allowed");
                    returnval = false;
                }
                
                var iname = document.forms['warehoseForm']["warehousename"].value;
                if (iname.length > 50) {
                    seterror("wname", "Input must be less than 50 characters");
                    returnval = false;
                }
    
                var iname = document.forms['warehoseForm']["warehousename"].value;
                if (iname.length == "") {
                    seterror("wname", "This field is required");
                    returnval = false;
                }
              
                var itemdes = document.forms['warehoseForm']["Warehouse_Add"].value;
                if (itemdes.length > 100) {
                    seterror("WAdd", "Input must be less than 100  characters");
                    returnval = false;
                }
                var itemdes = document.forms['warehoseForm']["Warehouse_Add"].value;
                if (itemdes.length == "") {
                    seterror("WAdd", "This field is required");
                    returnval = false;
                }

                  
            return returnval;
        }
                
    </script>
    <script>

        function ValidateName() {
            var numberRegex = new RegExp("[0-9]");
            var numRegex = /[!@#$%^&*+\-=\[\]{};':"\\|<>\/?]+/;

            var iname = document.forms['warehoseForm']["warehousename"].value;
            if (iname.length == "") {
                seterror("wname","This field is required");
                returnval = false;
            }
            else {

                errors = document.getElementById("wname1");

                errors.innerHTML = "";

            }

            var iname = document.forms['warehoseForm']["warehousename"].value;
            if (iname.match(numRegex)) {
                seterror("wname","Special Characters are not allowed");
                returnval = false;
            }

            
            var iname = document.forms['warehoseForm']["warehousename"].value;
            if (iname.length > 50) {
                seterror("wname","Input must be less than 50 characters");
                returnval = false;
            }

            return returnval;
        }

    </script>

    <script>
        function Validateitmdes() {
            var itemdes = document.forms['warehoseForm']["Warehouse_Add"].value;
            if (itemdes.length == "") {
                seterror("WAdd","This field is required");
                returnval = false;
            }
            else {

                errors = document.getElementById("wadd1");

                errors.innerHTML = "";

            }
            var itemdes = document.forms['warehoseForm']["Warehouse_Add"].value;
            if (itemdes.length > 100) {
                seterror("WAdd","Input must be less than 100  characters");
                returnval = false;
            }


            return returnval;
        }
    </script>

<!--------sweetalert delete---------------->


{% endblock %}